function searchPlaces(){var e=document.getElementById("keyword").value;ps.keywordSearch(e,placesSearchCB)}function placesSearchCB(e,a,n){if(a===daum.maps.services.Status.OK)displayPlaces(e),displayPagination(n);else{if(a===daum.maps.services.Status.ZERO_RESULT)return void alert("검색 결과가 존재하지 않습니다.");if(a===daum.maps.services.Status.ERROR)return void alert("검색 결과 중 오류가 발생했습니다.")}}function displayPlaces(e){var a=document.getElementById("placesList"),n=document.getElementById("menu_wrap"),t=document.createDocumentFragment(),s=new daum.maps.LatLngBounds;removeAllChildNods(a),removeMarker();for(var r=0;r<e.length;r++){var o=new daum.maps.LatLng(e[r].y,e[r].x),i=addMarker(o,r),d=getListItem(r,e[r]);s.extend(o),function(e,a){daum.maps.event.addListener(e,"mouseover",function(){displayInfowindow(e,a)}),daum.maps.event.addListener(e,"mouseout",function(){infowindow.close()}),d.onmouseover=function(){displayInfowindow(e,a)},d.onmouseout=function(){infowindow.close()}}(i,e[r].place_name),t.appendChild(d)}a.appendChild(t),n.scrollTop=0,map.setBounds(s)}function getListItem(e,a){var n=document.createElement("li"),t='<span class="markerbg marker_'+(e+1)+'"></span><div class="info">   <h5>'+a.place_name+"</h5>";return a.road_address_name?t+="    <span>"+a.road_address_name+'</span>   <span class="jibun gray">'+a.address_name+"</span>":t+="    <span>"+a.address_name+"</span>",t+='  <span class="tel">'+a.phone+"</span></div>",n.innerHTML=t,n.className="item",n}function addMarker(e,a,n){var t=new daum.maps.Size(36,37),s={spriteSize:new daum.maps.Size(36,691),spriteOrigin:new daum.maps.Point(0,46*a+10),offset:new daum.maps.Point(13,37)},r=new daum.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png",t,s),o=new daum.maps.Marker({position:e,image:r});return o.setMap(map),markers.push(o),o}function removeMarker(){for(var e=0;e<markers.length;e++)markers[e].setMap(null);markers=[]}function displayPagination(e){for(var a,n=document.getElementById("pagination"),t=document.createDocumentFragment();n.hasChildNodes();)n.removeChild(n.lastChild);for(a=1;a<=e.last;a++){var s=document.createElement("a");s.href="#",s.innerHTML=a,a===e.current?s.className="on":s.onclick=function(a){return function(){e.gotoPage(a)}}(a),t.appendChild(s)}n.appendChild(t)}function displayInfowindow(e,a){var n='<div style="padding:5px;z-index:1;">'+a+"</div>";infowindow.setContent(n),infowindow.open(map,e)}function removeAllChildNods(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}var $=jQuery,mapContainer=$("#map")[0],mapOptions={center:new daum.maps.LatLng(37.57484288719911,126.93107087733638),level:12},map=new daum.maps.Map(mapContainer,mapOptions),geocoder=new daum.maps.services.Geocoder,ps=new daum.maps.services.Places(map);!function(e,a){function n(){$("#myModal").modal("show")}function t(e){var a=e.latLng;map.setCursor("default"),m.setContent(d),m.setPosition(a)}function s(a,n){n===e.maps.services.Status.OK&&($("#form__address")[0].value=a[0].address.address_name,null==a[0].road_address?$("#form__road__address")[0].value="도로명 주소가 없습니다.":$("#form__road__address")[0].value=a[0].road_address.address_name)}function r(a){var o=a.latLng,i=null;n(),i="위도 "+o.getLat()+" 경도 "+o.getLng(),$("#result1")[0].innerHTML=i,e.maps.event.removeListener(map,"click",r),e.maps.event.removeListener(map,"mousemove",t),geocoder.coord2Address(o.getLng(),o.getLat(),s),$("#xy__table")[0].value=i,map.setCursor(null),m.setVisible(!1)}function o(a){e.maps.event.removeListener(map,"click",r),e.maps.event.removeListener(map,"mousemove",t),e.maps.event.removeListener(map,"rightclick",o),map.setCursor(null),m.setVisible(!1)}var i=$("#markerMake")[0],d='<div id="img"></div>',m=new e.maps.CustomOverlay({map:map});i.addEventListener("click",function(a){m.setVisible(!0),e.maps.event.addListener(map,"click",r),e.maps.event.addListener(map,"rightclick",o),e.maps.event.addListener(map,"mousemove",t)},!1)}(window.daum,window.jQuery),function(e,a){function n(){$("#multiAddModel").modal("show")}function t(e){var a=e.latLng;p.setMap(map),p.setPosition(a)}function s(a){(c=new e.maps.Marker({position:a.latLng})).setMap(map),l.push(c);for(var n=0;n<l.length;n++)l[n].setMap(map)}function r(a){e.maps.event.removeListener(map,"click",s),e.maps.event.removeListener(map,"mousemove",t),e.maps.event.removeListener(map,"rightclick",r),p.setMap(null);for(var n=0;n<l.length;n++)l[n].setMap(null);l=0,l=[]}function o(e,a){var n=null,t=null,s=null,r=null,o=document.createElement("form");o.setAttribute("id","form2"),$("#multiModel-body")[0].appendChild(o),s=e[0].address.address_name,r=e[0].road_address,n=$('<label for="form__address">지번 주소</label><input type="text" class="form-control" id="form__address" placeholder="지번 주소">').appendTo("#form2"),$(n)[1].value=s,null==r?(t=$('<label for="form__road__address">도로명 주소</label><input type="text" class="form-control" id="form__road__address" placeholder="도로명 주소">').appendTo("#form2"),$(t)[1].value="도로명 주소가 없습니다."):(t=$('<label for="form__road__address">도로명 주소</label><input type="text" class="form-control" id="form__road__address" placeholder="도로명 주소">').appendTo("#form2"),$(t)[1].value=r.address_name)}function i(e){for(var a=0;a<e.length;a++)geocoder.coord2Address(e[a].getPosition().getLng(),e[a].getPosition().getLat(),o);n(),r(),$("#form2").remove()}var d=$("#multiMake")[0],m=$("#registration")[0],l=[],p=new e.maps.Marker,c=null;d.addEventListener("click",function(a){e.maps.event.addListener(map,"click",s),e.maps.event.addListener(map,"rightclick",r),e.maps.event.addListener(map,"mousemove",t)},!1),m.addEventListener("click",function(e){0==l?alert("markerArray에 내용이 없습니다."):i(l)},!1)}(window.daum,window.jQuery),function(e,a){function n(e,a,n){e.addEventListener?e.addEventListener(a,n):e.attachEvent("on"+a,n)}function t(){var e=this.id,a=this.className;v.setMap(null),w.setMap(null),"on"===a?(_="",r(),m()):(_=e,r(this),s())}function s(){_&&(w.setMap(null),m(),ps.categorySearch(_,o,{useMapBounds:!0}))}function r(e){var a,n=document.getElementById("category").children;for(a=0;a<n.length;a++)n[a].className="";e&&(e.className="on")}function o(a,n,t){n===e.maps.services.Status.OK?i(a):n===e.maps.services.Status.ZERO_RESULT||n===e.maps.services.Status.ERROR&&alert("오류로 인해 검색을 하지 못했습니다.")}function i(a){for(var n=document.getElementById(_).getAttribute("data-order"),t=0;t<a.length;t++)!function(a,n){e.maps.event.addListener(a,"click",function(){var a=map.getLevel();l(n),u(n),a>5&&(map.setLevel(5),map.setCenter(new e.maps.LatLng(n.y,n.x))),e.maps.event.removeListener(map,"mouseover",function(){c(n)})}),e.maps.event.addListener(a,"mouseover",function(){c(n)}),e.maps.event.addListener(a,"mouseout",function(){u(n)})}(d(new e.maps.LatLng(a[t].y,a[t].x),n),a[t]),function(a,n){e.maps.event.addListener(a,"click",function(){p(n)})}(map,a[t])}function d(a,n){var t=new e.maps.Size(27,28),s={spriteSize:new e.maps.Size(72,208),spriteOrigin:new e.maps.Point(46,36*n),offset:new e.maps.Point(11,28)},r=new e.maps.MarkerImage("http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_category.png",t,s),o=new e.maps.Marker({position:a,image:r});return o.setMap(map),g.push(o),o}function m(){for(var e=0;e<g.length;e++)g[e].setMap(null);g=[]}function l(a){var n='<div class="placeinfo">   <p class="title" target="_blank" title="'+a.place_name+'">'+a.place_name+"</p>";a.road_address_name?n+='    <span title="'+a.road_address_name+'">'+a.road_address_name+'</span>  <span class="jibun" title="'+a.address_name+'">(지번 : '+a.address_name+")</span>":n+='    <span title="'+a.address_name+'">'+a.address_name+"</span>",n+='    <span class="tel">'+a.phone+'</span></div><div class="after"></div>',f.innerHTML=n,v.setPosition(new e.maps.LatLng(a.y,a.x)),v.setMap(map)}function p(e){v.setMap(null)}function c(a){var n='<p class="title2" target="_blank" title="'+a.place_name+'">'+a.place_name+"</p>";L.innerHTML=n,w.setPosition(new e.maps.LatLng(a.y,a.x)),w.setMap(map)}function u(e){w.setMap(null)}var v=new e.maps.CustomOverlay({zIndex:1}),f=document.createElement("div"),g=[],_="",w=new e.maps.CustomOverlay({zIndex:1}),L=document.createElement("div");f.className="placeinfo_wrap",L.className="placeinfo2_wrap",v.setContent(f),w.setContent(L),n(f,"mousedown",e.maps.event.preventMap),n(f,"touchstart",e.maps.event.preventMap),n(L,"mousedown",e.maps.event.preventMap),n(L,"touchstart",e.maps.event.preventMap),function(){for(var e=document.getElementById("category").children,a=0;a<e.length;a++)e[a].onclick=t}()}(window.daum,window.jQuery),function(e,a){function n(e,a){t.coord2Address(e.getLng(),e.getLat(),a)}var t=new e.maps.services.Geocoder;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){var t=a.coords.latitude,s=a.coords.longitude,r=new e.maps.LatLng(t,s),o=(map.getCenter(),map.getLevel());map.setCenter(r),map.setLevel(o-9,{animate:{duration:400}}),n(r,function(a,n){if(n===e.maps.services.Status.OK){var t=a[0].road_address?"<div>도로명주소 : "+a[0].road_address.address_name+"</div>":"",s='<div class="bAddr"><span class="title">법정동 주소정보</span>'+(t+="<div>지번 주소 : "+a[0].address.address_name+"</div>")+"</div>";document.getElementById("result2").innerHTML=s}})});else{new e.maps.LatLng(36.52935,128.45029);alert("현재 위치를 알 수 없습니다.")}}(window.daum,window.jQuery);var markers=[],infowindow=new daum.maps.InfoWindow({zIndex:1});searchPlaces(),$(document).ready(function(){$(".show_btn").click(function(){$("#menu_wrap").toggle();removeMarker();})});